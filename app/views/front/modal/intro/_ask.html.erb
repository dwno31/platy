<div class="modal-dialog intro-dialog" role="document">
  <div class="modal-content">
    <div class="modal-body intro-body">
      <div id="index-carousel" class="carousel slide" data-interval="false">
        <!-- Indicators -->
        <ol class="carousel-indicators">
          <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
          <li data-target="#carousel-example-generic" data-slide-to="1"></li>
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox">
          <div class="close-modal" onclick="$('.modal').modal('hide');">
            <span>&times;</span>
          </div>
          <% (0..3).each do |x| %>
          <div class="item" style="background-image:url('/assets/intro/ask_0<%= x+1%>.jpg');">
          <% if x==0 %>
            <div class="option-padding" style="height:26%">
              <span onclick="carousel_prev()" style="display:none;"><</span>
            </div>
            <% (0..2).each do |y| %>
            <div class="option-horizon" style="height:22%;" onclick="set_option(<%=x%>,<%=y%>)"></div>
            <% end %>
          </div>
          <% else %>
            <div class="option-padding">
              <span onclick="carousel_prev()" style="display:none;"><</span>
            </div>
            <% (0..2).each do |y| %>
                <div class="option-horizon" onclick="set_option(<%=x%>,<%=y%>)"></div>
            <% end %>
            </div>
          <% end%>
          <% end %>

        </div>

      </div>
    </div>
  </div>
</div>
<script>
    $(".item").eq(0).addClass('active');
    $(".carousel").carousel({
        wrap: false
    });
    var option = [0,0];
    function set_option(index,number){
        $(".option-padding>span").show();
        if(index!==0){
            option[1] = number;
            $.ajax({
                url:"/userprefer",
                method:"POST",
                data:{prefer:JSON.stringify(option)},
                success:function(data){
                $(".contents-frame").load('/section/product',function(){
                <% if current_user.nil? %>
                $(".login-modal").modal('show');
                <% else %>
                $(".modal").modal('hide');
                <% end %>


                });
                window.setTimeout(function(){
                    $(".carousel").carousel(0);
                },1000)
                }

            });

        }else{
            option[0] = number;
            $(".carousel").carousel(number+1);
            $(".carousel-indicators>li").eq(1).addClass('active');
        }

    }
    function carousel_prev(){
        $(".carousel").carousel(0);
        $(".option-padding>span").hide();
    }
</script>

